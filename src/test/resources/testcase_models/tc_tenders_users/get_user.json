{
  "scenarioName": "Checks both Jaggaer and Conclave and returns roles for a user",
  "steps": [
    {
      "name": "generate_token",
      "url": "/oauth/token",
      "method": "POST",
      "request": {
        "headers": {
          "X-API-KEY": "${x_api_key}"
        },
        "body" : "${JSON.FILE:requests_jsonbody/generate_token.json}"
      },
      "verify": {
        "status": 200
      }
    },
    {
      "name": "verify_user_role",
      "url": "${tenders.endpoint.baseurl}/tenders/users/${user_name}",
      "method": "GET",
      "request": {
        "headers": {
          "Authorization": "Bearer ${$.generate_token.response.body.accessToken}"
        }
      },
      "verify": {
        "status": 409,
        "body" : "${JSON.FILE:responses_jsonbody/tenders_user_role.json}"
      }
    }

  ]
}